!function(e){var t={};function n(i){if(t[i])return t[i].exports;var s=t[i]={i:i,l:!1,exports:{}};return e[i].call(s.exports,s,s.exports,n),s.l=!0,s.exports}n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)n.d(i,s,function(t){return e[t]}.bind(null,s));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=3)}([function(e,t,n){},function(e,t){e.exports='<!doctype html> <html lang=en> <head> <meta charset=UTF-8> <meta name=viewport content="width=device-width,initial-scale=1"> <meta http-equiv=X-UA-Compatible content="ie=edge"> <script src=./gif.js><\/script> <script src=./gif.worker.js><\/script> <script src=./UPNG.js><\/script> <title>Piskel-clone</title> </head> <body id=body> <header> <div class=header><h1>PISKEL</h1></div> </header> <div class=main-wrapper> <div class=main> <div class=draw-instr> <div class=wrap-instr> <div class="pen selected"> <button type=button class=pen-btn id=pen-btn></button> </div> <div class=eraser> <button type=button class=eraser-btn id=eraser-btn></button> </div> <div class=rectangle> <button type=button class=rect-btn id=rect-btn></button> </div> <div class=circle> <button type=button class=circle-btn id=circle-btn></button> </div> <div class=stroke> <button type=button class=stroke-btn id=stroke-btn></button> </div> <div class=mirrorPenX> <button type=button class=vert-mir-btn id=vert-mir-btn></button> </div> <div class=mirrorPenY> <button type=button class=horiz-mir-btn id=horiz-mir-btn></button> </div> <div class=col-picker> <button type=button class=color-picker-btn id=color-picker-btn></button> </div> <div class=secondary-color> <input type=color name=color-sec id=sec-color class=sec-color value=#000000> </div> <div class=primary-color> <input type=color name=color id=color class=prim-color value=#ff0000> </div> </div> </div> <div class=frames id=frames> <div class="frame current" id=frame> <div class=numb id=numb>1</div> <canvas id=frame-item class=frame-item width=100 height=100></canvas> <div class=delete id=delete></div> </div> <button class=add-frame id=add-frame><i class="fas fa-plus"></i>Add new frame</button> </div> <div class=canvas-main-wrap> <div class=canvas-main id=canvas-main> <canvas width=768px height=768px class=canvas-preview-clone id=canvas-preview-clone></canvas> <canvas width=768px height=768px class=canvas-clone id=canvas-clone></canvas> <canvas width=768px height=768px class=canvas-draw id=canvas-draw></canvas> </div> </div> <div class=preview> <div class=wrapper-can> <canvas id=canvas-preview class=canvas-preview width=140 height=140></canvas> </div> <div class=preview-control> <span class=value>1 FPS</span> <input type=range name=fps min=1 max=24 step=1 class=fps value=1> <span class=fullscr>Full screen</span> </div> <div class=export> <button class=exp-gif>Export file</button> <a href="" class=download-gif download>Download as .gif</a> </div> <div class=canvas-sizes> <div>Canvas sizes:</div> <div class=wrap-sizes> <label for=32>32x32</label> <input type=radio name=size value=32 id=32 checked=checked> <label for=64>64x64</label> <input type=radio name=size value=64 id=64> <label for=128>128x128</label> <input type=radio name=size value=128 id=128> </div> </div> <div class=info> <div class=wrap-info> <p>Coordinates:</p> <p>x</p> <p>y</p> </div> </div> </div> </div> </div> </body> </html> '},function(e,t,n){},function(e,t,n){"use strict";n.r(t);n(0),n(1);n(2);!function(){let e,t,n,i,s=!1,c="red",a="black",l="pen";const o=[];let r,d,u,v,m,f,p,g,b=[],h=1,y=0;const E=document.querySelector('input[type="range"]'),L=document.querySelector(".value");let w=E.value;const k=document.getElementsByClassName("canvas-main")[0],x=document.getElementById("canvas-draw"),M=x.getContext("2d"),C=document.getElementById("canvas-clone"),B=C.getContext("2d"),P=document.getElementById("canvas-preview-clone"),I=P.getContext("2d"),N=document.getElementById("canvas-preview"),R=N.getContext("2d");let z=32;const S=document.getElementsByClassName("wrap-sizes")[0],T=document.getElementById("color-picker-btn"),$=document.getElementById("eraser-btn"),X=document.getElementById("pen-btn"),j=document.getElementsByClassName("vert-mir-btn")[0],Y=document.getElementsByClassName("horiz-mir-btn")[0],q=document.getElementById("rect-btn"),A=document.getElementById("stroke-btn"),F=document.getElementById("circle-btn"),O=document.getElementById("color"),D=document.getElementById("sec-color");T.addEventListener("click",function(){l="colPicker",document.getElementsByClassName("selected")[0].classList.toggle("selected"),T.classList.add("selected")}),$.addEventListener("click",function(){l="eraser",document.getElementsByClassName("selected")[0].classList.toggle("selected"),$.classList.add("selected")}),X.addEventListener("click",function(){l="pen",document.getElementsByClassName("selected")[0].classList.toggle("selected"),X.classList.add("selected")}),j.addEventListener("click",function(){l="vertMirrorPen",document.getElementsByClassName("selected")[0].classList.toggle("selected"),j.classList.add("selected")}),Y.addEventListener("click",function(){l="horizMirrorPen",document.getElementsByClassName("selected")[0].classList.toggle("selected"),Y.classList.add("selected")}),q.addEventListener("click",function(){l="rectangle",C.style.visibility="visible",document.getElementsByClassName("selected")[0].classList.toggle("selected"),q.classList.add("selected")}),A.addEventListener("click",function(){l="stroke",C.style.visibility="visible",document.getElementsByClassName("selected")[0].classList.toggle("selected"),A.classList.add("selected")}),F.addEventListener("click",function(){l="circle",C.style.visibility="visible",document.getElementsByClassName("selected")[0].classList.toggle("selected"),F.classList.add("selected")}),O.addEventListener("input",function(){c=this.value}),D.addEventListener("input",function(){a=this.value}),S.addEventListener("click",function(){for(let e=0;e<S.children.length;e+=1)!0===S.children[e].checked&&(z=+S.children[e].value)});const _=(e,t)=>{e>768&&(e=768),t>768&&(t=768),32===z&&(n=Math.ceil(e/24),i=Math.ceil(t/24)),64===z&&(n=Math.ceil(e/12),i=Math.ceil(t/12)),128===z&&(n=Math.ceil(e/6),i=Math.ceil(t/6))};function U(e,n,i){if("right"===t&&(i.fillStyle=a),"left"===t&&(i.fillStyle=c),32===z){const t=24*(e-1),s=24*(n-1);i.beginPath(),"pen"!==l&&"vertMirrorPen"!==l&&"horizMirrorPen"!==l&&"stroke"!==l&&"rectangle"!==l&&"circle"!==l||(i.fillRect(t,s,24,24),i.fill()),"eraser"===l&&i.clearRect(t,s,24,24)}if(64===z){const t=12*(e-1),s=12*(n-1);i.beginPath(),"pen"!==l&&"vertMirrorPen"!==l&&"horizMirrorPen"!==l&&"stroke"!==l&&"rectangle"!==l&&"circle"!==l||(i.fillRect(t,s,12,12),i.fill()),"eraser"===l&&i.clearRect(t,s,12,12)}if(128===z){const t=6*(e-1),s=6*(n-1);i.beginPath(),"pen"!==l&&"vertMirrorPen"!==l&&"horizMirrorPen"!==l&&"stroke"!==l&&"rectangle"!==l&&"circle"!==l||(i.fillRect(t,s,6,6),i.fill()),"eraser"===l&&i.clearRect(t,s,6,6)}}function H(e,t,s,c){let a=0,l=s,o=1-2*s,r=0;for(;l>=0;)_(e+a,t+l),U(n,i,c),_(e+a,t-l),U(n,i,c),_(e-a,t+l),U(n,i,c),_(e-a,t-l),U(n,i,c),r=2*(o+l)-1,o<0&&r<=0?o+=2*(a+=1)+1:(r=2*(o-a)-1,o>0&&r>0?o+=1-2*(l-=1):(o+=2*((a+=1)-l),l-=1))}function G(e,t,s,c,a){const l=Math.abs(t-e),o=Math.abs(c-s);let r=0,d=o/l,u=s,v=c-s;if(v>0&&(v=1),v<0&&(v=-1),e<t)for(let s=e;s<=t;s+=1)_(s,u),U(n,i,a),(r+=d)>=.5&&(u+=v,r-=1);else if(e>t)for(let s=e;s>=t;s-=1)_(s,u),U(n,i,a),(r+=d)>=.5&&(u+=v,r-=1);if(o>l){d=l/o;let v=e,m=t-e;if(m>0&&(m=1),m<0&&(m=-1),s<c)for(u=s;u<=c;u+=1)_(v,u),U(n,i,a),(r+=d)>=.5&&(v+=m,r-=1);else if(s>c)for(u=s;u>=c;u-=1)_(v,u),U(n,i,a),(r+=d)>=.5&&(v+=m,r-=1)}}function K(e,t,s,c,a){let l,o,r,d,u,v,m,f,p,g,b;if(r=t-e,d=c-s,u=Math.abs(r),m=2*(v=Math.abs(d))-u,f=2*u-v,v<=u)for(r>=0?(l=e,o=s,p=t):(l=t,o=c,p=e),_(l,o),U(n,i,a),b=0;l<p;b+=1)m<0?m+=2*v:(r<0&&d<0||r>0&&d>0?o+=1:o-=1,m+=2*(v-u)),_(l+=1,o),U(n,i,a);else for(d>=0?(l=e,o=s,g=c):(l=t,o=c,g=s),_(l,o),U(n,i,a),b=0;o<g;b+=1)f<=0?f+=2*u:(r<0&&d<0||r>0&&d>0?l+=1:l-=1,f+=2*(u-v)),_(l,o+=1),U(n,i,a)}const J=document.getElementsByClassName("wrap-info")[0];function Q(){let e=document.getElementsByClassName("frame current")[0].children[1].getContext("2d");e.clearRect(0,0,100,100),e.drawImage(x,0,0,100,100),b=M.getImageData(0,0,768,768)}function V(e){e.target.closest(".frame").children[2].style.visibility="visible"}function W(e){e.target.closest(".frame").children[2].style.visibility="hidden"}x.addEventListener("mousemove",function(e){const t=e.clientX,s=e.clientY;_(t,s),J.children[1].innerHTML=`x ${n} user unit, ${t} px`,J.children[2].innerHTML=`y ${i} user unit, ${s} px`}),x.addEventListener("mousedown",function(e){0===e.button&&(t="left"),2===e.button&&(t="right"),"pen"!==l&&"eraser"!==l||(s=!0,r=void 0,d=void 0),"vertMirrorPen"===l&&(s=!0,r=void 0,d=void 0,m=void 0,f=void 0),"horizMirrorPen"===l&&(s=!0,r=void 0,d=void 0,p=void 0,g=void 0),"stroke"!==l&&"rectangle"!==l&&"circle"!==l||(C.style.visibility="visible",r=e.pageX-k.offsetLeft,d=e.pageY-k.offsetTop,s=!0,_(r,d),U(n,i,B))}),x.addEventListener("mousedown",function(e){if("colPicker"===l){r=e.pageX-k.offsetLeft,d=e.pageY-k.offsetTop;const t=M.getImageData(r,d,1,1).data;let n=t[0].toString(16);1===n.length&&(n=`0${n}`);let i=t[1].toString(16);1===i.length&&(i=`0${i}`);let s=t[2].toString(16);1===s.length&&(s=`0${s}`),0===e.button&&(c=`#${n}${i}${s}`,O.value=c),2===e.button&&(a=`#${n}${i}${s}`,D.value=a)}}),x.addEventListener("mouseup",function(){"pen"!==l&&"eraser"!==l||(s=!1,r=void 0,u=void 0,d=void 0,v=void 0,Q()),"vertMirrorPen"!==l&&"horizMirrorPen"!==l||(s=!1,r=void 0,u=void 0,d=void 0,v=void 0,m=void 0,f=void 0,p=void 0,g=void 0,Q())}),x.addEventListener("mousemove",function(e){("pen"===l&&!0===s||"eraser"===l&&!0===s)&&(u=e.pageX-k.offsetLeft,v=e.pageY-k.offsetTop,_(u,v),U(n,i,M),r&&d&&G(r,u,d,v,M),r=u,d=v),"vertMirrorPen"===l&&!0===s&&(u=e.pageX-k.offsetLeft,m=768-u+1,v=e.pageY-k.offsetTop,_(u,v),U(n,i,M),_(m,v),U(n,i,M),r&&d&&G(r,u,d,v,M),f&&d&&G(f,m,d,v,M),r=u,d=v,f=m),"horizMirrorPen"===l&&!0===s&&(u=e.pageX-k.offsetLeft,v=e.pageY-k.offsetTop,p=768-v+1,_(u,v),U(n,i,M),_(u,p),U(n,i,M),r&&d&&G(r,u,d,v,M),g&&r&&G(r,u,g,p,M),r=u,d=v,g=p)}),x.addEventListener("contextmenu",function(e){e.preventDefault()}),C.addEventListener("mousedown",function(e){0===e.button&&(t="left"),2===e.button&&(t="right"),"stroke"!==l&&"rectangle"!==l&&"circle"!==l||(r=e.pageX-k.offsetLeft,d=e.pageY-k.offsetTop,s=!0,_(r,d),U(n,i,B))}),C.addEventListener("mouseup",function(){"circle"===l&&(s=!1,u=void 0,v=void 0,C.style.visibility="hidden",H(r,d,e,M),B.clearRect(0,0,768,768),r=void 0,d=void 0),"stroke"===l&&(s=!1,C.style.visibility="hidden",K(r,u,d,v,M),B.clearRect(0,0,768,768),r=void 0,u=void 0,d=void 0,v=void 0),"rectangle"===l&&(s=!1,C.style.visibility="hidden",G(r,r,d,v,M),G(r,u,v,v,M),G(u,u,v,d,M),G(r,u,d,d,M),B.clearRect(0,0,768,768),r=void 0,u=void 0,d=void 0,v=void 0),Q()}),C.addEventListener("mousemove",function(e){"stroke"===l&&!0===s&&(B.clearRect(0,0,780,780),u=e.pageX-k.offsetLeft,v=e.pageY-k.offsetTop),K(r,u,d,v,B)}),C.addEventListener("mousemove",function(e){"rectangle"===l&&!0===s&&(B.clearRect(0,0,780,780),u=e.pageX-k.offsetLeft,v=e.pageY-k.offsetTop,G(r,r,d,v,B),G(r,u,v,v,B),G(u,u,v,d,B),G(r,u,d,d,B))}),C.addEventListener("mousemove",function(t){"circle"===l&&!0===s&&(B.clearRect(0,0,780,780),u=t.pageX-k.offsetLeft,v=t.pageY-k.offsetTop,e=Math.ceil(Math.sqrt(Math.pow(Math.abs(u-r),2)+(Math.abs(v-d),2))),H(r,d,e,B))});const Z=document.querySelectorAll(".frame");for(let e=0;e<Z.length;e+=1)Z[e].addEventListener("mouseover",V),Z[e].addEventListener("mouseleave",W);let ee=document.getElementById("frame");const te=document.getElementById("add-frame");function ne(){o.length&&setTimeout(()=>{window.requestAnimationFrame(ne),R.clearRect(0,0,140,140),o[y]||(y=0),I.putImageData(o[y],0,0,0,0,768,768),R.drawImage(P,0,0,140,140),y<o.length-1&&o[y+1]?y+=1:y=0},1e3/w)}function ie(){b&&(M.clearRect(0,0,768,768),M.putImageData(b,0,0,0,0,768,768))}function se(){const e=ee.children[0].textContent;b=o[e-1]}E.addEventListener("input",function(){const e=E.value;L.innerHTML=`${e} FPS`,w=e}),te.addEventListener("click",function(e){if(!b)return void e.stopPropagation();M.clearRect(0,0,768,768),e.stopPropagation(),o.push(b),ne();const t=document.createElement("div");ee.classList.toggle("current"),t.className="frame current",document.getElementById("frames").insertBefore(t,te),ee=t;const n=document.createElement("div");n.className="numb",ee.appendChild(n),h=ee.parentElement.children.length-1,n.textContent=h;const i=document.createElement("canvas");i.setAttribute("id","frame-item"),i.setAttribute("width","100"),i.setAttribute("height","100"),i.className="frame-item",ee.appendChild(i);const s=document.createElement("div");s.setAttribute("id","delete"),s.className="delete",ee.appendChild(s);const c=document.querySelectorAll(".frame");for(let e=0;e<c.length;e+=1)c[e].addEventListener("mouseover",V),c[e].addEventListener("mouseleave",W)});const ce=document.getElementById("frames");ce.addEventListener("click",function(e){const{target:t}=e,n=t.closest(".delete"),i=t.closest(".frame"),s=i.parentElement;if(n&&2!==s.children.length){i.classList.contains("current")&&i.classList.toggle("current"),s.removeChild(i),o.splice(i.children[0].textContent-1,1),(ee=s.children[s.children.length-2]).classList.contains("current")||ee.classList.toggle("current");for(let e=0;e<=s.children.length-2;e+=1)s.children[e].children[0].textContent=e+1;se(),ie()}}),ce.addEventListener("click",function(e){const{target:t}=e,n=t.closest(".frame");n.classList.contains("current")||(b&&(o[ee.children[0].textContent-1]=b),n&&(ee.classList.contains("current")&&ee.classList.toggle("current"),b=o[(ee=n).children[0].textContent-1],n.classList.contains("current")||n.classList.toggle("current"),se(),ie()))}),document.getElementsByClassName("fullscr")[0].addEventListener("click",function(){N.requestFullscreen()}),document.getElementsByClassName("exp-gif")[0].addEventListener("click",function(){if(!o.length)return;const e=new GIF({workers:2,quality:10,repeat:0});for(let t=0;t<o.length;t+=1)e.addFrame(o[t],{copy:!0},{delay:1e3/w});const t=document.getElementsByClassName("download-gif")[0];t.style.display="block",e.on("finished",e=>{t.href=URL.createObjectURL(e)}),e.render(),t.download="piskel-clone"})}()}]);
//# sourceMappingURL=app.bundle.js.map